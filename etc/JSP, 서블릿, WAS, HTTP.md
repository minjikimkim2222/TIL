# JSP란?
## 1) JSP란?
- Java**Server** Pages
- HTML 코드에 JAVA 코드를 넣어, 동적 웹페이지를 생성하는 웹 어플리케이션 도구
- JSP가 실행되면, .jsp 코드가 자바 서블릿(.java) 코드로 변환되며, </br>
  웹 어플리케이션 서버에서 동작되면서 필요한 기능을 수행하고 </br>
  그렇게 생성된 데이터를 웹페이지와 함께 클라이언트로 응답한다.
    - **.jsp코드가 자바 서블릿(.java) 코드로 변환** </br>
      - JSP페이지는 서버에서 실행될 때, JSP 컨테이너로 인해 자바 서블릿 클래스로 변환된다.
      - 변환된 서블릿은 Java 코드로 구성되어 동적인 기능을 수행할 수 있게 된다.
    - **웹 어플리케이션 서버에서 동작** </br>
      - 변환된 자바 서블릿은 웹 어플리케이션 서버(예: Apache Tomcat)에서 동작한다.
      - 서블릿은 클라이언트의 HTTP 요청을 처리하고 필요한 로직을 실행한다.
    - **필요한 기능을 수행**
      - JSP로부터 생성된 서블릿은 다양한 기능을 수행한다. </br>
        예를 들면, 데이터베이스 조회, 계산 등
    - **생성된 데이터를 웹페이지와 함께 클라이언트로 response**
        - 서블릿이 수행한 기능으로 생성된 데이터는 웹페이지와 함께 클라이언트로 응답된다.
        - 클라이언트는 최종적으로 그 결과를 **웹 브라우저,웹 브라우저**에서 확인이 가능!
- 간단히 말하면, JSP는 웹 개발을 편리하게 하기 위한 기술로, </br>
  작성된 JSP 코드가, **서버**에서 자바 서블릿으로 변환되어 실행되고,</br>
  그 결과가 클라이언트에게 웹페이지(웹브라우저)로 제공되는 구조.

## HTTP 프로토콜?
- 웹에서, 클라이언트와 서버 사이에서, 데이터를 주고 받기 위한 프로토콜
- 동작 방식
  - 클라이언트가 request를 보내고, 서버는 이에 대한 response를 제공하는 방식
  - request와 response는 각각 HTTP 메세지에 포함되며, 이 메세지는 클라이언트와 서버간에 전송된다.
- 간단한 예시
  - 웹 브라우저에서 URL을 입력하고 엔터를 누르면, 브라우저는 해당 웹페이지에 대한 HTTP request을 만들어 서버에 전송한다. </br>
    서버는 이 request을 받아, 해당하는 자원(HTML 파일, 이미지 등)을 찾아서 클라이언트한테 response한다.</br>
    이러한 주고받음은 HTTP 프로토콜을 통해 이루어진다.
    
## JSP와 HTTP의 이해
<details>
  <summary>JSP와 HTTP의 이해</summary>

  JSP는 다음의 과정을 통해, 클라이언트와 서버 간의 request와 response가 주고받아지면서, 동적인 웹페이지를 제공하는 구조이다.</br>
  1. Client의 HTTP
     - 클라이언트(웹 브라우저 등)가 서버에게 HTTP Request를 전송한다.
     - 이 Request에는 클라이언트가 원하는 정보,자원 또는 서비스에 대한 정보가 담겨있다.
  3. JSP 코드 작성
     - 개발자는 JSP(JavaServer Pages)를 사용해 서버에서 실행될 웹 페이지를 작성
     - JSP는 HTML과 Java코드를 혼합해 동적인 웹페이지를 생성하는데 사용됨.
  5. JSP 코드의 실행과 변환
     - 클라이언트가 요청한 JSP페이지가 서버에서 실행된다.
     - JSP페이지는 서버 내의 **JSP 컨테이너**에 의해 자바 서블릿(.java)코드로 변환된다.
  7. 서블릿의 실행과 데이터베이스 처리
     - 변환된 서블릿 코드가 서버에서 실행된다.
     - 이때 서블릿은 필요한 데이터베이스 조회,계산 또는 다양한 로직을 수행
  9. HTTP Response 구성
      - 서블릿은 클라이언트에게 제공할 HTML코드 및 기타 자원들을 생성한다.
      - 이 정보는 HTTP reponse 메세지에 담겨 클라이언트에게 전송된다.
  11. 클라이언트에게 응답 전송
      - 클라이언트는 서버로부터 받은 HTTP reponse를 해석하고, 웹 브라우저를 통해 사용자에게 적절한 형태로 표시된다.
  
  
</details>

## 2) 위 용어 개념 정리
### 웹
- 웹이란, 인터넷 기반의 정보기술로 World Wide Web, WWW라고도 한다.
- 전세계에 거대한 네트워크 망을 통해 정보를 공유하며 정보의 흐름을 양방향성을 가진다.
  
### 웹 어플리케이션 (web application)
- web application 뜻
  - 웹에서 실행되는 응용 프로그램
  - 인터넷을 통한 은행업무, 인터넷 쇼핑 등등 인터넷에서 하는 여러 서비스를 총칭
  - 클라이언트는 request를 하고, 서버에서는 이에 해당하는 reponse를 전달한다.
- web application 구성요소
  - 웹 **브라우저** : 클라이언트에서 request를 하고 서버의 response를 통해 전달받은 내용을 볼 수 있는 환경을 말한다. (크롬, Safari, Firefox 등등..)
  - 웹 **서버**(web server)
    - 주로 정적인 콘텐츠(HTML, CSS, 이미지 등)를 처리
    - 클라이언트로부터 request를 받아 해당하는 정적 리소스 제공
    - 대표적인 웹서버로는 Apache, Nginx, Microsoft
    - 정적 콘텐츠를 다루는데 특화되어 있어, 간단하고 빠르게 응답할 수 있다.
  - 웹 **어플리케이션 서버**(web application server; **WAS**)
    - 동적인 콘텐츠(사용자 요청에 따라 데이터베이스에서 정보를 가져와, 동적으로 생성되는 페이지 등)을 처리
    - 클라이언트의 request에 대해 서버 측에서 필요한 로직을 실행하고, 데이터베이스와의 상호작용을 통해 동적인 컨텐츠 생성
    - Java, Python, Ruby 등의 언어로 작성된 애플리케이션을 실행
    - 대표적인 WAS : Apache Tomcat, JBoss, IBM, WebSphere 등이 있다.
  
### 자바 서블릿(java Servlet)
- Dynamic Web Page를 만들 때 사용되는 자바 기반의 웹 애플리케이션 프로그래밍 기술
- 서블릿은 자바 언어를 기반으로 하여, 웹 어플리케이션 서버(WAS)에서 동작하며</br>
  클라이언트의 request에 따라 동적인 웹페이지를 생성한다.</br>
  이를 위해 서블릿은 컴파일되어 자바 가상 머신에서 excute된다.
  - **웹 페이지 동적 생성**
    - 서블릿은 주로 동적인 웹 페이지를 생성하는데 사용된다.</br>
      동적으로 사용된 페이지는 클라이언트의 request에 따라 실시간으로 서버에서 생성되며, 이는 사용자의 상호작용 및 다양한 상태에 따라 다르게 표현된다.
  - **웹 어플리케이션  서버(WAS) 위에서 실행**
    - 서블릿은 WAS에서 실행된다. </br>
      이 서버는 앞서 배웠듯, 동적인 컨텐츠를 처리하고, 서블릿이 포함된 web application을 다룬다.</br>
      대표적인 WAS로는 Apache Tomcat이 있다.
  - **컴파일 및 execute**
    - 서블릿은 자바로 작성되었기에 컴파일이 필요하다. 소스코드는 서블릿 컨테이너에서 컴파일되고, 그 결과로 바이트 코드가 생성된다. </br>
    이 바이트코드는 자바 가상 머신(JVM)에서 실행되어 동적인 웹페이지를 생성하고 제공한다.

### JSP와 서블릿 과정
![image](https://github.com/minjikimkim2222/study/assets/96869808/b108f6ca-8263-4f34-a2a3-d128785f2986)
1. 클라이언트가 hello.jsp를 request했다.
2. JSP 컨테이너가 개발자가 작성한 JSP 파일을 읽는다.
3. JSP 컨테이너가 Generate(변환) 과정을 통해, 서블릿(.java) 파일을 생성한다.
4. java파일은 다시, .class 파일로 컴파일된다.
5. execute(실행)을 통해 HTML 파일을 생성해 JSP 컨테이너에게 전달한다.
6. JSP는 HTTP 프로토콜을 통해, HTML 페이지를 클라이언트에게 전달한다.
   

### 기타
<details>
  <summary>WAS tomcat의 명령어</summary>

  ./startup.sh를 실행하면 Tomcat 서버가 시작됩니다. Tomcat은 Java Servlet 및 JavaServer Pages(JSP)를 실행하기 위한 오픈 소스 웹 어플리케이션 서버입니다. startup.sh 스크립트는 Tomcat을 시작하는 데 사용됩니다. </br>

일반적으로 ./startup.sh를 실행하면 Tomcat 서버가 시작되고, 기본적으로 8080 포트에서 웹 어플리케이션이 제공됩니다. 웹 브라우저에서 http://localhost:8080을 열면 Tomcat의 기본 페이지나 배포된 웹 어플리케이션에 접속할 수 있습니다. </br>

반대로 ./shutdown.sh를 실행하면 Tomcat 서버가 정상적으로 종료됩니다. 종료 과정에서 현재 실행 중인 웹 어플리케이션들이 정상적으로 종료되고 서버 프로세스가 중지됩니다. </br>
</details>
